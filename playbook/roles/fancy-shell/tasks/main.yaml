- name: set git proxy
  shell: "git config --global http.proxy '{{ http_proxy }}'"

- name: check git proxy settings
  failed_when: (http_proxy == "" and mainland) or (http_proxy != "" and  not mainland)
  debug:
    msg: "正确配置github代理"

- name: install necessary packages
  become: yes
  when: ansible_distribution == 'Debian' or ansible_distribution == 'Ubuntu'
  apt:
    pkg:
      - build-essential
      - curl
      - git
      - zsh
      - rsync
      - tmux


- name: install dotfile
  git:
    repo: https://github.com/CNLHC/.dotfile
    dest: ~/.dotfile
    update: false

- name: zsh settings
  include: zsh.yaml

- name: nvim settings
  include: nvim.yaml

- name: tmux settings
  include: tmux.yaml
